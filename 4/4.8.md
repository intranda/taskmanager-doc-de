# 4.8. ALTO Generierung aus ABBYY-xml mittels intranda AltoConvert

Die Zusammenarbeit mit dem intranda TaskManager erlaubt Goobi, die aufwändige ALTO Generierung mit der Erkennung von Lauftiteln und Seitenzahlen auf externe Maschinen auszulagern.

## Aufruf des Plugins

Der Aufruf der ALTO-Generierung mittels `intranda AltoConvert` muss aus einem Workflowschritt folgendermaßen erfolgen:

```bash
/usr/bin/java -jar /opt/digiverso/itm/bin/TaskClient.jar 
    -itm http://localhost:8080/itm/service 
    -s {tifpath} 
    -d {processpath}/ocr/{processtitle}_alto/ 
    -e 
    -gid {processid} 
    -i {stepid} 
    -T {processtitle} 
    -t ALTOCONVERT 
    -n altoconvert
```

## Parameter

Die innerhalb dieses Aufrufs zu übergebenen Parameter haben folgende Bedeutungen:

<table>
  <thead>
    <tr>
      <th style="text-align:left">Parameter</th>
      <th style="text-align:left">Mögliche Goobi Variable</th>
      <th style="text-align:left">Bedeutung</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left"><code>-itm</code>
      </td>
      <td style="text-align:left"><code>http://localhost/itm/service</code>
      </td>
      <td style="text-align:left">URL zur Schnittstelle des intranda TaskManagers</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-e</code>  <code>--returnError</code>
      </td>
      <td style="text-align:left">-</td>
      <td style="text-align:left">Wenn angegeben, beendet sich der TaskClient mit einem Fehlercode, um das
        automatische Fortschreiten im Workflow zu unterbinden</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-p</code>
      </td>
      <td style="text-align:left"><code>0 &#x2013; 10</code>
      </td>
      <td style="text-align:left">Priorität zur Verarbeitung dieses Jobs</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-gid</code>
      </td>
      <td style="text-align:left"><code>{processid}</code>
      </td>
      <td style="text-align:left">ID des Goobi-Vorgangs</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-i</code>
      </td>
      <td style="text-align:left"><code>{stepid}</code>
      </td>
      <td style="text-align:left">Die ID des Arbeitsschrittes, der den Aufruf startet</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-T</code>, <code>--title</code>
      </td>
      <td style="text-align:left"><code>{processtitle}</code>
      </td>
      <td style="text-align:left">Der Vorgangstitel in Goobi, für den der Aufruf gestartet wird</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-t</code>, <code>--jobtype</code>
      </td>
      <td style="text-align:left"><code>ALTOCONVERT</code>
      </td>
      <td style="text-align:left">Der Typ des Jobs</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-n</code>, <code>--templatename</code>
      </td>
      <td style="text-align:left"><code>template</code>
      </td>
      <td style="text-align:left">Name der zuvor erzeugten Konfigurationsdatei</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-s</code>, <code>--source</code>
      </td>
      <td style="text-align:left"><code>{tifpath}</code>
      </td>
      <td style="text-align:left">Pfad zum tif-Verzeichnis des Vorgangs</td>
    </tr>
    <tr>
      <td style="text-align:left"><code>-d</code>, <code>--destination</code>
      </td>
      <td style="text-align:left">
        <p><code>{processpath}/ocr/</code>
        </p>
        <p><code>{processtitle}\_alto/</code>
        </p>
      </td>
      <td style="text-align:left">Pfad zum zu erzeugenden ALTO-Verzeichnis im Vorgang</td>
    </tr>
  </tbody>
</table>## Arbeitsweise des Plugins

Nach der Generierung der ALTO-Dateien werden die erzeugten Dateien durch den TaskManager vollautomatisch in das an den TaskClient übergebene Zielverzeichnis verschoben. Darüber hinaus erfolgt neben dem Eintrag über den erfolgreichen Abschluss der Arbeiten in das Vorgangslog auch der Abschluss des automatischen Workflowschritts via WebAPI.

